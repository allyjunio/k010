<div class="page-header">
	<h1>Dados dos Usuários
	</h1>
</div>

<div class="row">
	<div class="col-xs-12">

		<div class="row">

			<div class="col-sm-12">
				<uib-tabset>
					<uib-tab active="tab[0]" ng-click="selectList()">
						<uib-tab-heading>
							Lista de Usuários
						</uib-tab-heading>
						<table datatable="ng" class="table table-striped table-bordered table-hover row-border hover">
							<thead>
							<tr>
								<th>Nome</th>
								<th>Username</th>
								<th>Perfil de Acesso</th>
								<th>Ações</th>
							</tr>
							</thead>

							<tbody>
								<tr ng-repeat="usuario in allUsuarios">
									<td>{{usuario.nome}}</td>
									<td>{{usuario.username}}</td>
									<td>{{usuario.roles[0].nome}}</td>
									<td>
										<div class='hidden-sm hidden-xs action-buttons'>
											<a class="blue" href="" ng-click="openModal(usuario._id.toString())"><i class="ace-icon fa fa-search-plus bigger-130"></i></a>
											<a class="green" href="" ng-click="restore(usuario._id.toString())"><i class="ace-icon fa fa-pencil bigger-130"></i></a>										</div>
									</td>
								</tr>
							</tbody>
						</table>
						<script type="text/ng-template" id="modalContent.html">
							<div class="modal-header">
								<h3 class="modal-title">Detalhes do Usuario</h3>
							</div>
							<div class="modal-body">
								<h3>Usuário</h3>
								<ul>
									<li>Nome: <b>{{usuarioModal.nome}}</b></li>
									<li>Username: <b>{{usuarioModal.username}}</b></li>
								</ul>
								<h3>Perfil de Acesso</h3>
								<ul>
									<li>Nome: <b>{{usuarioModal.roles[0].nome}}</b></li>
									<li>Permissões de Página:</li>
									<div ng-repeat="perfilAcesso in usuarioModal.roles[0].perfilAcesso">
										<ul>
											<li><b>{{perfilAcesso}}</b></li>
										</ul>
									</div>
								</ul>
							</div>
							<div class="modal-footer">
								<button class="btn btn-primary btn-sm" type="button" ng-click="ok()">OK</button>
							</div>
						</script>
					</uib-tab>

					<uib-tab active="tab[1]" ng-click="selectEdit()">
						<uib-tab-heading>
							Cadastro de Usuário
						</uib-tab-heading>

						<form class="form-horizontal" role="form" name="formCadastro">
							<input type="hidden" ng-model="cadastro._id"/>

							<div class="form-group">
								<label class="col-sm-1 control-label no-padding-right">
									Nome
								</label>
								<div class="col-sm-11">
									<input type="text" placeholder="Nome" class="col-sm-12" ng-model="cadastro.nome" ng-required="true"/>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-1 control-label no-padding-right">
									Username
								</label>
								<div class="col-sm-11">
									<input type="text" placeholder="Nome para login" class="col-sm-12" ng-model="cadastro.username" ng-required="true"/>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-1 control-label no-padding-right">
									Senha
								</label>
								<div class="col-sm-11">
									<input type="password" placeholder="Senha" class="col-sm-12" ng-model="cadastro.password" ng-required="cadastro._id == null || cadastro._id == undefined"/>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-1 control-label no-padding-right">
									Perfil de Acesso
								</label>
								<div class="col-sm-11">
									<select class="col-sm-12 no-padding-right" id="produto-select" ng-model="cadastro.role" ng-options="perfilAcesso.nome for perfilAcesso in allPerfilAcesso track by perfilAcesso._id.toString()" ng-required="true">
									</select>
								</div>
							</div>



							<div class="clearfix">
								<div class="col-md-offset-1 col-md-12">
									<button class="btn btn-info" type="button" ng-click="enviar()" ng-disabled="formCadastro.$invalid">
										<i class="ace-icon fa fa-check bigger-110"></i>
										Enviar
									</button>
								</div>
							</div>

						</form>


					</uib-tab>
				</uib-tabset>
			</div><!-- /.col -->
		</div>
	</div>
</div>

<script src="../components/underscore/underscore.min.js"></script>


